{"ast":null,"code":"import { DIRECTION_UP, DIRECTION_DOWN, DIRECTION_RIGHT, DIRECTION_LEFT } from \"../helpers/consts\";\nfunction triangleArea(x1, y1, x2, y2, x3, y3) {\n  return Math.abs((x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)) / 2.0);\n}\nexport class DirectionControls {\n  constructor() {\n    this.directionKeys = {\n      ArrowDown: DIRECTION_DOWN,\n      ArrowUp: DIRECTION_UP,\n      ArrowLeft: DIRECTION_LEFT,\n      ArrowRight: DIRECTION_RIGHT,\n      s: DIRECTION_DOWN,\n      w: DIRECTION_UP,\n      a: DIRECTION_LEFT,\n      d: DIRECTION_RIGHT\n    };\n    this.heldDirections = [];\n    function parseTouch(touch) {\n      return DIRECTION_DOWN;\n    }\n    this.directionKeyDownHandler = e => {\n      const dir = this.directionKeys[e.key];\n      if (dir && this.heldDirections.indexOf(dir) === -1) {\n        this.heldDirections.unshift(dir);\n      }\n    };\n    this.directionKeyUpHandler = e => {\n      const dir = this.directionKeys[e.key];\n      const index = this.heldDirections.indexOf(dir);\n      if (index > -1) {\n        this.heldDirections.splice(index, 1);\n      }\n    };\n    this.touchKeyDownHandler = e => {\n      console.log(e.touches[0]);\n      const dir = parseTouch(e.touches[0]);\n      console.log(dir);\n      if (dir && this.heldDirections.indexOf(dir) === -1) {\n        this.heldDirections.unshift(dir);\n      }\n    };\n    this.touchKeyUpHandler = e => {\n      const dir = parseTouch(e.touches[0]);\n      const index = this.heldDirections.indexOf(dir);\n      if (index > -1) {\n        this.heldDirections.splice(index, 1);\n      }\n    };\n    document.addEventListener(\"keydown\", this.directionKeyDownHandler);\n    document.addEventListener(\"keyup\", this.directionKeyUpHandler);\n    document.addEventListener(\"touchstart\", this.touchKeyDownHandler);\n    document.addEventListener(\"touchend\", this.touchKeyUpHandler);\n  }\n  get direction() {\n    return this.heldDirections[0];\n  }\n  unbind() {\n    document.removeEventListener(\"keydown\", this.directionKeyDownHandler);\n    document.removeEventListener(\"keyup\", this.directionKeyUpHandler);\n  }\n}","map":{"version":3,"names":["DIRECTION_UP","DIRECTION_DOWN","DIRECTION_RIGHT","DIRECTION_LEFT","triangleArea","x1","y1","x2","y2","x3","y3","Math","abs","DirectionControls","constructor","directionKeys","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","s","w","a","d","heldDirections","parseTouch","touch","directionKeyDownHandler","e","dir","key","indexOf","unshift","directionKeyUpHandler","index","splice","touchKeyDownHandler","console","log","touches","touchKeyUpHandler","document","addEventListener","direction","unbind","removeEventListener"],"sources":["C:/GitHub/AthabascaCPSCI/COMP 486/Mineral Mayhem/src/classes/DirectionControls.js"],"sourcesContent":["import {\r\n  DIRECTION_UP,\r\n  DIRECTION_DOWN,\r\n  DIRECTION_RIGHT,\r\n  DIRECTION_LEFT,\r\n} from \"../helpers/consts\";\r\n\r\nfunction triangleArea(x1, y1, x2, y2, x3, y3) {\r\n  return Math.abs((x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)) / 2.0);\r\n}\r\n\r\nexport class DirectionControls {\r\n  constructor() {\r\n    this.directionKeys = {\r\n      ArrowDown: DIRECTION_DOWN,\r\n      ArrowUp: DIRECTION_UP,\r\n      ArrowLeft: DIRECTION_LEFT,\r\n      ArrowRight: DIRECTION_RIGHT,\r\n      s: DIRECTION_DOWN,\r\n      w: DIRECTION_UP,\r\n      a: DIRECTION_LEFT,\r\n      d: DIRECTION_RIGHT,\r\n    };\r\n    this.heldDirections = [];\r\n\r\n    function parseTouch(touch) {\r\n      return DIRECTION_DOWN;\r\n    }\r\n\r\n    this.directionKeyDownHandler = (e) => {\r\n      const dir = this.directionKeys[e.key];\r\n      if (dir && this.heldDirections.indexOf(dir) === -1) {\r\n        this.heldDirections.unshift(dir);\r\n      }\r\n    };\r\n\r\n    this.directionKeyUpHandler = (e) => {\r\n      const dir = this.directionKeys[e.key];\r\n      const index = this.heldDirections.indexOf(dir);\r\n      if (index > -1) {\r\n        this.heldDirections.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    this.touchKeyDownHandler = (e) => {\r\n      console.log(e.touches[0]);\r\n      const dir = parseTouch(e.touches[0]);\r\n      console.log(dir);\r\n      if (dir && this.heldDirections.indexOf(dir) === -1) {\r\n        this.heldDirections.unshift(dir);\r\n      }\r\n    };\r\n\r\n    this.touchKeyUpHandler = (e) => {\r\n      const dir = parseTouch(e.touches[0]);\r\n      const index = this.heldDirections.indexOf(dir);\r\n      if (index > -1) {\r\n        this.heldDirections.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", this.directionKeyDownHandler);\r\n    document.addEventListener(\"keyup\", this.directionKeyUpHandler);\r\n    document.addEventListener(\"touchstart\", this.touchKeyDownHandler);\r\n    document.addEventListener(\"touchend\", this.touchKeyUpHandler);\r\n  }\r\n\r\n  get direction() {\r\n    return this.heldDirections[0];\r\n  }\r\n\r\n  unbind() {\r\n    document.removeEventListener(\"keydown\", this.directionKeyDownHandler);\r\n    document.removeEventListener(\"keyup\", this.directionKeyUpHandler);\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}