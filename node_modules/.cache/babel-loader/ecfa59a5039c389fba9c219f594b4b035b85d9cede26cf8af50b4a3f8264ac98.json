{"ast":null,"code":"import { LEVEL_THEMES, PLACEMENT_TYPE_GOAL, PLACEMENT_TYPE_HERO } from \"../helpers/consts\";\nimport { placementFactory } from \"./PlacementFactory\";\nimport { GameLoop } from \"./GameLoop\";\nexport class LevelState {\n  constructor(levelId, onEmit) {\n    this.id = levelId;\n    this.onEmit = onEmit;\n\n    //Start the level!\n    this.start();\n  }\n  start() {\n    this.theme = LEVEL_THEMES.BLUE;\n    this.tilesWidth = 14;\n    this.tilesHeight = 22;\n    this.placements = [{\n      id: 0,\n      x: 2,\n      y: 2,\n      type: PLACEMENT_TYPE_HERO\n    }, {\n      id: 1,\n      x: 6,\n      y: 4,\n      type: PLACEMENT_TYPE_GOAL\n    }].map(config => {\n      return placementFactory.createPlacement(config, this);\n    });\n    this.startGameLoop();\n  }\n  startGameLoop() {\n    var _this$gameLoop;\n    (_this$gameLoop = this.gameLoop) === null || _this$gameLoop === void 0 ? void 0 : _this$gameLoop.stop();\n    this.gameLoop = new GameLoop(() => {\n      this.tick();\n    });\n  }\n  tick() {\n    // Call 'tick' on any Placement that wants to update\n    this.placements.forEach(placement => {\n      placement.tick();\n    });\n\n    //Emit any changes to React\n    this.onEmit(this.getState());\n  }\n  getState() {\n    return {\n      theme: this.theme,\n      tilesWidth: this.tilesWidth,\n      tilesHeight: this.tilesHeight,\n      placements: this.placements\n    };\n  }\n  destroy() {\n    // Tear down the level.\n    this.gameLoop.stop();\n  }\n}","map":{"version":3,"names":["LEVEL_THEMES","PLACEMENT_TYPE_GOAL","PLACEMENT_TYPE_HERO","placementFactory","GameLoop","LevelState","constructor","levelId","onEmit","id","start","theme","BLUE","tilesWidth","tilesHeight","placements","x","y","type","map","config","createPlacement","startGameLoop","_this$gameLoop","gameLoop","stop","tick","forEach","placement","getState","destroy"],"sources":["C:/GitHub/AthabascaCPSCI/COMP 486/Mineral Mayhem/mineralmayhem/src/classes/LevelState.js"],"sourcesContent":["import {\r\n    LEVEL_THEMES,\r\n    PLACEMENT_TYPE_GOAL,\r\n    PLACEMENT_TYPE_HERO,\r\n  } from \"../helpers/consts\";\r\nimport { placementFactory } from \"./PlacementFactory\";\r\nimport { GameLoop } from \"./GameLoop\";\r\n\r\nexport class LevelState {\r\n  constructor(levelId, onEmit) {\r\n    this.id = levelId;\r\n    this.onEmit = onEmit;\r\n\r\n    //Start the level!\r\n    this.start();\r\n  }\r\n\r\n  start() {\r\n    this.theme = LEVEL_THEMES.BLUE;\r\n    this.tilesWidth = 14;\r\n    this.tilesHeight = 22;\r\n    this.placements = [\r\n        { id: 0, x: 2, y: 2, type: PLACEMENT_TYPE_HERO },\r\n        { id: 1, x: 6, y: 4, type: PLACEMENT_TYPE_GOAL },\r\n      ].map((config) => {\r\n        return placementFactory.createPlacement(config, this);\r\n      });\r\n      this.startGameLoop();\r\n  }\r\n\r\n  startGameLoop() {\r\n    this.gameLoop?.stop();\r\n    this.gameLoop = new GameLoop(() => {\r\n      this.tick();\r\n    });\r\n  }\r\n\r\n  tick() {\r\n    // Call 'tick' on any Placement that wants to update\r\n    this.placements.forEach((placement) => {\r\n      placement.tick();\r\n    });\r\n\r\n    //Emit any changes to React\r\n    this.onEmit(this.getState());\r\n  }\r\n\r\n  getState() {\r\n    return {\r\n      theme: this.theme,\r\n      tilesWidth: this.tilesWidth,\r\n      tilesHeight: this.tilesHeight,\r\n      placements: this.placements,\r\n    };\r\n  }\r\n\r\n  destroy() {\r\n    // Tear down the level.\r\n    this.gameLoop.stop();\r\n  }\r\n}"],"mappings":"AAAA,SACIA,YAAY,EACZC,mBAAmB,EACnBC,mBAAmB,QACd,mBAAmB;AAC5B,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,QAAQ,QAAQ,YAAY;AAErC,OAAO,MAAMC,UAAU,CAAC;EACtBC,WAAWA,CAACC,OAAO,EAAEC,MAAM,EAAE;IAC3B,IAAI,CAACC,EAAE,GAAGF,OAAO;IACjB,IAAI,CAACC,MAAM,GAAGA,MAAM;;IAEpB;IACA,IAAI,CAACE,KAAK,CAAC,CAAC;EACd;EAEAA,KAAKA,CAAA,EAAG;IACN,IAAI,CAACC,KAAK,GAAGX,YAAY,CAACY,IAAI;IAC9B,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,WAAW,GAAG,EAAE;IACrB,IAAI,CAACC,UAAU,GAAG,CACd;MAAEN,EAAE,EAAE,CAAC;MAAEO,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE,CAAC;MAAEC,IAAI,EAAEhB;IAAoB,CAAC,EAChD;MAAEO,EAAE,EAAE,CAAC;MAAEO,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE,CAAC;MAAEC,IAAI,EAAEjB;IAAoB,CAAC,CACjD,CAACkB,GAAG,CAAEC,MAAM,IAAK;MAChB,OAAOjB,gBAAgB,CAACkB,eAAe,CAACD,MAAM,EAAE,IAAI,CAAC;IACvD,CAAC,CAAC;IACF,IAAI,CAACE,aAAa,CAAC,CAAC;EACxB;EAEAA,aAAaA,CAAA,EAAG;IAAA,IAAAC,cAAA;IACd,CAAAA,cAAA,OAAI,CAACC,QAAQ,cAAAD,cAAA,uBAAbA,cAAA,CAAeE,IAAI,CAAC,CAAC;IACrB,IAAI,CAACD,QAAQ,GAAG,IAAIpB,QAAQ,CAAC,MAAM;MACjC,IAAI,CAACsB,IAAI,CAAC,CAAC;IACb,CAAC,CAAC;EACJ;EAEAA,IAAIA,CAAA,EAAG;IACL;IACA,IAAI,CAACX,UAAU,CAACY,OAAO,CAAEC,SAAS,IAAK;MACrCA,SAAS,CAACF,IAAI,CAAC,CAAC;IAClB,CAAC,CAAC;;IAEF;IACA,IAAI,CAAClB,MAAM,CAAC,IAAI,CAACqB,QAAQ,CAAC,CAAC,CAAC;EAC9B;EAEAA,QAAQA,CAAA,EAAG;IACT,OAAO;MACLlB,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBE,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3BC,WAAW,EAAE,IAAI,CAACA,WAAW;MAC7BC,UAAU,EAAE,IAAI,CAACA;IACnB,CAAC;EACH;EAEAe,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACN,QAAQ,CAACC,IAAI,CAAC,CAAC;EACtB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}